{"version":3,"file":"ApolloLink.mjs","sources":["../../../../../../../../node_modules/@apollo/client/link/core/ApolloLink.js"],"sourcesContent":["import { newInvariantError, invariant } from \"../../utilities/globals/index.js\";\nimport { Observable } from \"../../utilities/index.js\";\nimport { validateOperation, createOperation, transformOperation, } from \"../utils/index.js\";\nfunction passthrough(op, forward) {\n    return (forward ? forward(op) : Observable.of());\n}\nfunction toLink(handler) {\n    return typeof handler === \"function\" ? new ApolloLink(handler) : handler;\n}\nfunction isTerminating(link) {\n    return link.request.length <= 1;\n}\nvar ApolloLink = /** @class */ (function () {\n    function ApolloLink(request) {\n        if (request)\n            this.request = request;\n    }\n    ApolloLink.empty = function () {\n        return new ApolloLink(function () { return Observable.of(); });\n    };\n    ApolloLink.from = function (links) {\n        if (links.length === 0)\n            return ApolloLink.empty();\n        return links.map(toLink).reduce(function (x, y) { return x.concat(y); });\n    };\n    ApolloLink.split = function (test, left, right) {\n        var leftLink = toLink(left);\n        var rightLink = toLink(right || new ApolloLink(passthrough));\n        var ret;\n        if (isTerminating(leftLink) && isTerminating(rightLink)) {\n            ret = new ApolloLink(function (operation) {\n                return test(operation) ?\n                    leftLink.request(operation) || Observable.of()\n                    : rightLink.request(operation) || Observable.of();\n            });\n        }\n        else {\n            ret = new ApolloLink(function (operation, forward) {\n                return test(operation) ?\n                    leftLink.request(operation, forward) || Observable.of()\n                    : rightLink.request(operation, forward) || Observable.of();\n            });\n        }\n        return Object.assign(ret, { left: leftLink, right: rightLink });\n    };\n    ApolloLink.execute = function (link, operation) {\n        return (link.request(createOperation(operation.context, transformOperation(validateOperation(operation)))) || Observable.of());\n    };\n    ApolloLink.concat = function (first, second) {\n        var firstLink = toLink(first);\n        if (isTerminating(firstLink)) {\n            globalThis.__DEV__ !== false && invariant.warn(38, firstLink);\n            return firstLink;\n        }\n        var nextLink = toLink(second);\n        var ret;\n        if (isTerminating(nextLink)) {\n            ret = new ApolloLink(function (operation) {\n                return firstLink.request(operation, function (op) { return nextLink.request(op) || Observable.of(); }) || Observable.of();\n            });\n        }\n        else {\n            ret = new ApolloLink(function (operation, forward) {\n                return (firstLink.request(operation, function (op) {\n                    return nextLink.request(op, forward) || Observable.of();\n                }) || Observable.of());\n            });\n        }\n        return Object.assign(ret, { left: firstLink, right: nextLink });\n    };\n    ApolloLink.prototype.split = function (test, left, right) {\n        return this.concat(ApolloLink.split(test, left, right || new ApolloLink(passthrough)));\n    };\n    ApolloLink.prototype.concat = function (next) {\n        return ApolloLink.concat(this, next);\n    };\n    ApolloLink.prototype.request = function (operation, forward) {\n        throw newInvariantError(39);\n    };\n    ApolloLink.prototype.onError = function (error, observer) {\n        if (observer && observer.error) {\n            observer.error(error);\n            // Returning false indicates that observer.error does not need to be\n            // called again, since it was already called (on the previous line).\n            // Calling observer.error again would not cause any real problems,\n            // since only the first call matters, but custom onError functions\n            // might have other reasons for wanting to prevent the default\n            // behavior by returning false.\n            return false;\n        }\n        // Throw errors will be passed to observer.error.\n        throw error;\n    };\n    ApolloLink.prototype.setOnError = function (fn) {\n        this.onError = fn;\n        return this;\n    };\n    return ApolloLink;\n}());\nexport { ApolloLink };\n//# sourceMappingURL=ApolloLink.js.map"],"names":["ApolloLink"],"mappings":"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","x_google_ignoreList":[0]}